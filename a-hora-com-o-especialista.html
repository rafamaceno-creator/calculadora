<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Hora com o Especialista | Maceno Strategy</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  margin: 0;
  background: #0f0f12;
  color: #ffffff;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 60px 20px;
}

h1 {
  font-size: 2.4rem;
  line-height: 1.3;
}

p {
  font-size: 1.1rem;
  opacity: 0.85;
}

.price {
  font-size: 2rem;
  margin-top: 30px;
}

.timer {
  margin-top: 15px;
  font-size: 1rem;
  color: #ff4d4f;
}

button {
  margin-top: 30px;
  background: #ffffff;
  color: #000000;
  border: none;
  padding: 18px 35px;
  font-size: 1.1rem;
  border-radius: 6px;
  cursor: pointer;
}

button:disabled {
  background: #555;
  cursor: not-allowed;
}

.section {
  margin-top: 80px;
}

ul {
  margin-top: 20px;
  padding-left: 20px;
}
</style>
</head>

<body>

<div class="container">

<h1>Se o seu neg√≥cio est√° travado, em 1 hora eu te mostro onde est√° o erro.</h1>

<p>
Sem teoria.<br>
Sem enrola√ß√£o.<br>
Sem promessa m√°gica.<br><br>
Diagn√≥stico direto. Plano claro. Decis√£o pr√°tica.
</p>

<div class="price">
Investimento: <strong>R$ 997</strong>
</div>

<div class="timer">
‚è≥ Oferta dispon√≠vel por: <span id="countdown"></span>
</div>

<button id="checkoutBtn">üîí Resolver isso agora por R$ 997</button>

<div class="section">
<h2>Essa sess√£o √© para voc√™ se:</h2>
<ul>
<li>J√° vende ou quer vender em marketplace</li>
<li>Est√° travado em margem ou escala</li>
<li>N√£o sabe se o problema √© pre√ßo, tr√°fego ou estrutura</li>
<li>Est√° cansado de tentar ajustar sozinho</li>
<li>Quer clareza estrat√©gica imediata</li>
</ul>
</div>

<div class="section">
<h2>O que acontece na hora:</h2>
<ul>
<li>Identifica√ß√£o do gargalo real</li>
<li>Ajuste de margem e precifica√ß√£o</li>
<li>Direcionamento estrat√©gico de tr√°fego</li>
<li>Plano claro de pr√≥ximos passos</li>
</ul>
</div>

<div class="section">
<h2>R$ 997 √© menos que:</h2>
<ul>
<li>Um m√™s rodando tr√°fego errado</li>
<li>Um lote comprado com margem negativa</li>
<li>Uma campanha mal estruturada</li>
<li>Um erro tribut√°rio n√£o percebido</li>
</ul>
</div>

</div>

<script>
// TIMER 24H PERSISTENTE
const storageKey = "horaEspecialistaTimer";
let endTime = localStorage.getItem(storageKey);

if (!endTime) {
  endTime = Date.now() + 24 * 60 * 60 * 1000;
  localStorage.setItem(storageKey, endTime);
}

const countdown = document.getElementById("countdown");
const button = document.getElementById("checkoutBtn");

function updateTimer() {
  const now = Date.now();
  const distance = endTime - now;

  if (distance <= 0) {
    countdown.innerHTML = "00:00:00";
    button.disabled = true;
    button.innerText = "Agenda temporariamente fechada";
    return;
  }

  const hours = Math.floor((distance / (1000 * 60 * 60)));
  const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((distance % (1000 * 60)) / 1000);

  countdown.innerHTML =
    String(hours).padStart(2, "0") + ":" +
    String(minutes).padStart(2, "0") + ":" +
    String(seconds).padStart(2, "0");
}

setInterval(updateTimer, 1000);
updateTimer();

// CHECKOUT
button.addEventListener("click", async () => {
  if (button.disabled) return;

  const response = await fetch("/api/create-checkout-session.php", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      utm_query: window.location.search
    })
  });

  const data = await response.json();
  if (data.url) {
    window.location.href = data.url;
  }
});
</script>

</body>
</html>
